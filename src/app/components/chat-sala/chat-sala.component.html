<!-- chat-sala.component.html -->
<h2>ðŸ’¬ Sala: {{ idSala }}</h2>

<ul id="mensajes">
  @for (msg of mensajes; track msg) {
    @if (msg.usuario === usuarioActual) {
      <li class="mensaje-propio">
        {{ msg.texto }}
        <div class="hora">{{ msg.fecha | date:'HH:mm' }}</div>
      </li>
    } @else {
      <li class="mensaje-otro">
        <strong>{{ msg.usuario }}:</strong>
        {{ msg.texto }}
        <div class="hora">{{ msg.fecha | date:'HH:mm' }}</div>
      </li>
    }
  }
</ul>

<form (ngSubmit)="enviarMensaje()">
  <input
    type="text"
    [(ngModel)]="nuevoMensaje"
    name="mensaje"
    placeholder="Escribe tu mensaje..."
    required
  />
  <button type="submit">Enviar</button>
</form>

<h3>Usuarios en esta sala</h3>
<ul>
  @for (u of usuariosConectados; track u) {
    <li>
      <a [routerLink]="['/privado', generarIdPrivado(usuarioActual, u)]">
        {{ u }}
      </a>
    </li>
  }
</ul>
